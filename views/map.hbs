<nav class="navbar navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <form class="form-inline">
        <input class="form" type="search" placeholder="Search" id="address">
        <a class="navbarbrand" href="#">
            <img src="images/boton-buscar1.png" width="135" height="135" alt="">
        </a>
        <a class="navbarbrand" href="#">
            <img src="images/boton-superior-malandro-2.png" width="135" height="135" alt="" value="save">
        </a>
    </form>
</nav>
<div id="map"></div>
<footer>
    <nav class="footer-nav">
        <a class="iconimages" href="#">
            <img src="images/icono-robo.png" width="140" height="140" alt="">
        </a>
        <a class="iconimages" href="#">
            <img src="images/icono-acoso-sexual.png" width="140" height="140" alt="">
        </a>
        <a class="iconimages" href="#">
            <img src="images/icono-grupos-sospechosos.png" width="140" height="140" alt="">
        </a>
        <a class="iconimages" href="#">
            <img src="images/icono-enfrentamientos-armados.png" width="140" height="140" alt="">
        </a>
        <a class="iconimages" href="#">
            <img src="images/icono-sin-luz.png" width="140" height="140" alt="">
        </a>
        <a class="iconimages" href="#">
            <img src="images/icono-agresion.png" width="140" height="140" alt="">
        </a>
    </nav>
</footer>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGQ8r0BfjX69HJHYdnGnoZ5K1m9YwjcQo&libraries=places"></script>
<script>
     /* New Dot */

        /*   
        let address = document.getElementById('search')
            function savePlace(input) {
                const dropdown = new google.maps.places.Autocomplete(input)
                dropdown.addListener('place_changed', () => {
                    let place = dropdown.getPlace()
                    lat.value = place.geometry.location.lat()
                    lng.value = place.geometry.location.lng()
                    name.value = place.name
                })
            }
            //click.addListener(address)
            savePlace(address)
        */
    const search = document.getElementById('address');
    console.log(search);
        var options = {
            componentRestrictions: {country: 'mx'}
        };
        function autoComplete(input) {
            const dropdown = new google.maps.places.Autocomplete(input, options);
            dropdown.addListener('place_changed', () => {
                const place = dropdown.getPlace()
                console.log(place.geometry.location.lat())
            })
        }
        autoComplete(search);
        

    function startMap() {
            /*const ironhackMex = {
              lat: 19.402671,
              lng: -99.169661 
            };*/
            
            if (navigator.geolocation) {
                // Get current position
                // The permissions dialog will popup
                navigator.geolocation.getCurrentPosition(function (position) {
                     const center = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    // Create an object to match
                    // google's Lat-Lng object format
                    const map = new google.maps.Map(
                        document.getElementById('map'),
                        {
                            center,
                            zoom: 20
                        }
                    );
                    var image = {
                            url:'images/marcador-malandro-rojo-big.png',
                            size: new google.maps.Size(80, 80)
                        };
                   
                    const myMarker = new google.maps.Marker({
                        position: center,
                        map: map,
                        title: "I'm here",
                        animation: google.maps.Animation.BOUNCE,
                        icon: image
                    });
                    /*
                    map.setCenter(center)
                    myMarker.setPosition(center)
                    console.log('center: ', center) 
                    */
                    // User granted permission
                    // Center the map in the position we got
                }, function () {
                    // If something else goes wrong
                    console.log('Error in the geolocation service.');
                });
            } else {
                // Browser says: Nah! I do not support this.
                console.log('Browser does not support geolocation.');
            }
        }

        startMap();
   
</script>
