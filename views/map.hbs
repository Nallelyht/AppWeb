<div id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGQ8r0BfjX69HJHYdnGnoZ5K1m9YwjcQo"></script>
<script>
    /* CÃ³digo de Oswaldo
    let center = {
        lat: {{ location.coordinates.[1]}},
        lng: {{ location.coordinates.[0]}}
    };
    let title = '{{name}}'
    const map = new google.maps.Map(
        document.getElementById('map'),
        {
            center,
            zoom: 15
        }
    )
    const marker = new google.maps.Marker({
        map,
        position: center,
        title,
        animation: google.maps.Animation.BOUNCE
    })
    */
    /* Ejemplo de IronHack
    function startMap() {
            const ironhackBCN = {
                lat: 41.3977381,
                lng: 2.190471916
            };
            const map = new google.maps.Map(
                document.getElementById('map'),
                {
                    zoom: 15,
                    center: ironhackBCN
                }
            );
        }

        startMap();
    */
    function startMap() {
            /*const ironhackMex = {
              lat: 19.402671,
              lng: -99.169661 
            };*/
            
            if (navigator.geolocation) {
                // Get current position
                // The permissions dialog will popup
                navigator.geolocation.getCurrentPosition(function (position) {
                     const center = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    // Create an object to match
                    // google's Lat-Lng object format
                    const map = new google.maps.Map(
                        document.getElementById('map'),
                        {
                            center,
                            zoom: 20
                        }
                    );
                    var image = {
                            url:'images/marcador-malandro-rojo-big.png',
                            size: new google.maps.Size(150, 150)
                        };
                   
                    const myMarker = new google.maps.Marker({
                        position: center,
                        map: map,
                        title: "I'm here",
                        animation: google.maps.Animation.BOUNCE,
                        icon: image
                    });
                    /*
                    map.setCenter(center)
                    myMarker.setPosition(center)
                    console.log('center: ', center) 
                    */
                    // User granted permission
                    // Center the map in the position we got
                }, function () {
                    // If something else goes wrong
                    console.log('Error in the geolocation service.');
                });
            } else {
                // Browser says: Nah! I do not support this.
                console.log('Browser does not support geolocation.');
            }
        }


        startMap();
</script>
